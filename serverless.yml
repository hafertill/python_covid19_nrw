service: corona-scraper-nrw

provider:
  name: aws
  region: eu-central-1
  runtime: python3.8
  stage: staging
  iamRoleStatements:
    - Effect: Allow
      Action:
        - s3:*
      Resource: "coronanrw"

functions:
  scrape:
    handler: handler.scrape
    timeout: 120
    events:
      - schedule:
          name: ${self:service}-${self:provider.stage}-scrape
          rate: rate(3 minutes)
          enabled: true


plugins:
  - serverless-python-requirements

custom:
  pythonRequirements:
    slim: true

package:
  exclude:
    - node_modules/**
    - venv/**
